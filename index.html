<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>⚽ Marca Fantasy - LaLiga 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { box-sizing: border-box; }
    .player-card { transition: all 0.3s ease; }
    .player-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
  </style>
</head>
<body class="bg-black min-h-screen">
  <div class="container mx-auto px-4 py-6">

    <!-- Header -->
    <div class="bg-white rounded-lg shadow-xl mb-6 p-6 flex justify-between items-center">
      <div>
        <h1 class="text-3xl font-bold text-gray-800">⚽ Marca Fantasy</h1>
        <p class="text-gray-600">Crea tu equipo ideal y compite</p>
      </div>
      <div class="text-right">
        <div class="text-2xl font-bold text-green-600" id="budget">€100M</div>
        <div class="text-sm text-gray-600">Presupuesto restante</div>
      </div>
    </div>

    <!-- Navigation -->
    <div class="bg-white rounded-lg shadow-xl mb-6">
      <div class="flex border-b">
        <button class="tab-btn px-6 py-3 font-semibold text-blue-600 border-b-2 border-blue-600" data-tab="team">Mi Equipo</button>
        <button class="tab-btn px-6 py-3 font-semibold text-gray-600 hover:text-blue-600" data-tab="market">Mercado</button>
        <button class="tab-btn px-6 py-3 font-semibold text-gray-600 hover:text-blue-600" data-tab="stadium">Estadio</button>
        <button class="tab-btn px-6 py-3 font-semibold text-gray-600 hover:text-blue-600" data-tab="league">Liga</button>
      </div>
    </div>

    <!-- Market Tab -->
    <div id="market-tab" class="tab-content">
      <div class="bg-white rounded-lg shadow-xl p-6">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-bold">Mercado de Fichajes</h2>
          <div class="flex gap-2">
            <select id="position-filter" class="px-3 py-2 border rounded-lg">
              <option value="">Todas las posiciones</option>
              <option value="GK">Porteros</option>
              <option value="DEF">Defensas</option>
              <option value="MID">Centrocampistas</option>
              <option value="FWD">Delanteros</option>
            </select>
            <select id="team-filter" class="px-3 py-2 border rounded-lg">
              <option value="">Todos los equipos</option>
            </select>
          </div>
        </div>
        <div id="players-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
          <p class="col-span-full text-center text-gray-500">Cargando jugadores...</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    let players = [];
    let budget = 100;

    // Cargar jugadores desde JSON
    async function loadPlayers() {
      try {
        const response = await fetch("jugadores_laliga.json");
        if (!response.ok) throw new Error("Archivo jugadores_laliga.json no encontrado");
        players = await response.json();
        populateFilters();
        renderPlayers();
      } catch (err) {
        document.getElementById("players-grid").innerHTML =
          `<p class="text-center text-red-600 font-semibold col-span-full py-10">❌ Error al cargar jugadores: ${err.message}</p>`;
      }
    }

    // Rellenar filtros de equipos
    function populateFilters() {
      const teams = [...new Set(players.map(p => p.team))].sort();
      const teamFilter = document.getElementById("team-filter");
      teams.forEach(team => {
        const opt = document.createElement("option");
        opt.value = team;
        opt.textContent = team;
        teamFilter.appendChild(opt);
      });
    }

    // Renderizar jugadores
    function renderPlayers() {
      const grid = document.getElementById("players-grid");
      const pos = document.getElementById("position-filter").value;
      const team = document.getElementById("team-filter").value;

      const filtered = players.filter(p => {
        return (!pos || p.position === pos) && (!team || p.team === team);
      });

      if (filtered.length === 0) {
        grid.innerHTML = `<p class="col-span-full text-center text-gray-500">No hay jugadores disponibles</p>`;
        return;
      }

      grid.innerHTML = filtered.map(p => `
        <div class="player-card bg-white border rounded-lg p-4 hover:shadow-lg">
          <div class="flex flex-col items-center mb-3">
            <img src="${p.photo}" alt="${p.name}" class="w-16 h-16 rounded-full border-2 border-gray-300 mb-2" />
            <h3 class="font-bold text-sm text-center">${p.name}</h3>
            <p class="text-xs text-gray-600">${p.team}</p>
          </div>
          <div class="flex justify-between items-center mb-2">
            <span class="inline-block px-2 py-1 text-xs rounded ${getPositionColor(p.position)}">${getPositionName(p.position)}</span>
            <span class="text-lg">${p.form}</span>
          </div>
          <div class="flex justify-between items-center mb-3">
            <span class="text-lg font-bold text-green-600">€${p.price}M</span>
            <span class="text-sm font-semibold">${p.points} pts</span>
          </div>
          <button class="w-full py-2 px-3 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-semibold">Fichar</button>
        </div>
      `).join('');
    }

    function getPositionName(pos) {
      switch(pos) {
        case 'GK': return 'Portero';
        case 'DEF': return 'Defensa';
        case 'MID': return 'Centrocampista';
        case 'FWD': return 'Delantero';
        default: return pos;
      }
    }

    function getPositionColor(pos) {
      switch(pos) {
        case 'GK': return 'bg-yellow-100 text-yellow-800';
        case 'DEF': return 'bg-blue-100 text-blue-800';
        case 'MID': return 'bg-green-100 text-green-800';
        case 'FWD': return 'bg-red-100 text-red-800';
        default: return 'bg-gray-100 text-gray-800';
      }
    }

    document.getElementById('position-filter').addEventListener('change', renderPlayers);
    document.getElementById('team-filter').addEventListener('change', renderPlayers);

    loadPlayers();
  </script>
</body>
</html>
